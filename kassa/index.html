<!DOCTYPE html>
<html lang="en">
<head>
    <title>PyroDesk</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="/assets/css/style.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="/assets/js/myscripts.js"></script>


</head>
<body>

<!--header-->
<nav class="navbar navbar-light justify-content-between" >
    <a class="navbar-brand" href="#" style="position: absolute; left: 0;">
        <img src="assets/images/PyroDesk.png" width="200" height="50" alt="">
    </a>
    <div class="col-12 logOutBtn">
        <i class="fa  fa-sign-out-alt"></i> Log Out
    </div>
</nav>
<!--header-->


<div class="container-fluid">
    <div class="row">
        <div class="col-8 shoppingSection">
            <!--toggle bar-->
            <div class="row">
                <div class="col-12 toggleBar">
                    <button id="toggleBtn" onclick="toggle()">Keyboard View</button>
                </div>
            </div>
            <!--/toggle bar-->

            <div class="row touchViewSection">
                <!--shopping sector-->
                <!-- touchView -->
                <!-- Categories menu -->
                <div class="col-3 categoriesSection"> Categories
                    <div class="categories">
                        <a class="nav-link" >All</a>
                        <a class="nav-link" >Rotjes</a>
                        <a class="nav-link" >Rotjes</a>
                        <a class="nav-link" >Flowerbeds</a>
                        <a class="nav-link" >All</a>
                        <a class="nav-link" >Rotjes</a>
                        <a class="nav-link" >cakes 500 gram</a>
                        <a class="nav-link" >Fonteinen</a>
                    </div>
                </div>
                <div class="col-3"></div>
                <!-- categories menu -->
                <div class="col-9 productItems" >
                    <br>
                    <div class="row">
                        <div class="col-3 productCard">
                            <a href="#" class="productItem" data-name="Celebration cracker 90 schots" data-price="50000" data-id="1">
                                <div class="card">
                                    <img src="assets/images/Firecracker.jpg" alt="Avatar" style="width:100%; height: 9vh;">
                                    <div class="container">
                                        <p> Rotje</p>
                                    </div>
                                </div>
                            </a>
                        </div>
                        <div class="col-3 productCard">
                            <a href="#" class="productItem" data-name="Aap" data-price="6900" data-id="2">
                                <div class="card">
                                    <img src="assets/images/Firecracker.jpg" alt="Avatar" style="width:100%; height: 9vh;">
                                    <div class="container">
                                        <p> Aap</p>
                                    </div>
                                </div>
                            </a>
                        </div>
                        <div class="col-3 productCard">
                            <a href="#" class="productItem" data-name="Fontein" data-price="3000" data-id="3">
                                <div class="card">
                                    <img src="assets/images/Firecracker.jpg" alt="Avatar" style="width:100%; height: 9vh;">
                                    <div class="container">
                                        <p> Fontein</p>
                                    </div>
                                </div>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            <!--/touchView -->
            <!--Keyboard View -->
            <div class="row keyboardViewSection">
                <div class="col-12 keyboardViewRow">
                    <div class="col-12 searchBar">
                        <input class="form-control searchBar" onkeyup="searchTable()" type="text" name="search" placeholder="search">
                    </div>
                    <table class="table table-hover">
                        <thead>
                        <tr>
                            <th scope="col">#</th>
                            <th scope="col">Product Name</th>
                            <th scope="col">Free Stock</th>
                            <th scope="col">Price</th>
                            <th scope="col">Actions</th>
                        </tr>
                        </thead>
                        <tbody id="productTable">
                        <tr>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <!--/Keyboard View -->
            <div class="footer">
                <div class="container">
                    <p class="text-muted"> Developed by Vesta Group</p>
                </div>
            </div>
        </div>
        <!--/shopping sector-->
        <div class="col-4 cartSection">
            <!--cart-->
            <div class="row">
                <div class="col-5">Product</div>
                <div class="col-1">Pcs.</div>
                <div class="col-2">Price</div>
                <div class="col-3">Total</div>
            </div>

            <hr style="background-color: white;">

            <div class="row" id="output">

            </div>


            <div class="row cartCheck">

                <div class="col-5">Numbers of products</div>
                <div class="col-1">1</div>
                <div class="col-2">Subtotal</div>
                <div class="col-3 total">&euro; 0,00</div>

                <div class="col-5"></div>
                <div class="col-1"></div>
                <div class="col-2">Total </div>
                <div class="col-3">&euro; 0,00</div>

                <div class="col-12 checkoutBtn"> Checkout </div>
                <div class="col-6 addDiscountBtn"> Add discount </div>
                <div class="col-6 cancelBtn"> Cancel </div>


            </div>

            <!--/cart-->
        </div>
    </div>
</div>


</div>
<script>
    var shoppingCart = [];
    $(document).ready(function() {
        outputShoppingCart();
        $(".productItem").click(function(e){
            e.preventDefault();
            var itemInfo = $(this.dataset)[0];
            itemInfo.qty = 1;
            var itemInCart = false;
            $.each(shoppingCart,function(index,value){
                // console.log(index + ' ' + value.id);
                if(value.id == itemInfo.id){
                    value.qty = parseInt(value.qty) + parseInt(itemInfo.qty);
                    itemInCart = true;
                }
            })
            if(!itemInCart){
                shoppingCart.push(itemInfo);
            }
            sessionStorage["sc"]= JSON.stringify(shoppingCart)
            outputShoppingCart();
            ///
        })

        function outputShoppingCart(){
            if(sessionStorage["sc"] != null){
                shoppingCart = JSON.parse(sessionStorage["sc"].toString());
            }
            var holderHTML = "";
            var total = 0;
            $.each(shoppingCart,function(index,value){
                console.log(value);
                var stotal = value.qty * value.price;
                var totalCount =
                total += stotal;
                holderHTML = holderHTML + '<div class="col-5">' + value.name  + '</div>' +
                                          '<div class="col-1">' + value.qty   + '</div>' +
                                          '<div class="col-2">' + formatMoney(value.price) + '</div>' +
                                          '<div class="col-3">' + formatMoney(stotal) + '</div>'
            })
            $('.total').html(formatMoney(total));
            $('#output').html(holderHTML);
        }

        function formatMoney(n){
            return "&euro;" + (n/100).toFixed(2);
        }
    })
</script>

<div class="hidden comment">
    <!--<script type="text/javascript">-->
    <!--    const xhr = new XMLHttpRequest();-->

    <!--    xhr.onload = function(){-->
    <!--        if (this.status === 200 ) {-->
    <!--            try {-->
    <!--                const resObj = JSON.parse(this.responseText);-->
    <!--                console.log(resObj);-->
    <!--            } catch (e) {-->
    <!--                console.warn('There was in an error in the JSON. Could not parse');-->
    <!--            }-->
    <!--        } else {-->
    <!--            console.warn('Did not receive 200 OK from response')-->
    <!--        }-->
    <!--    };-->

    <!--    xhr.open('get','assets/products/sample_products.json');-->
    <!--    xhr.send();-->
    <!--</script>-->
</div>

</body>
</html>